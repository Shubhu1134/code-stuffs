# 📘 Day 16: Virtual Memory, Demand Paging & Thrashing

---

## 🧠 What is Virtual Memory?

Virtual memory is a memory management technique that gives an **illusion of a very large main memory** by using a combination of **RAM + disk space**.

- Allows execution of larger programs than physical memory.
- Increases **multiprogramming**.
- Provides **memory isolation**.

---

## 🔹 Key Concepts

| Term                      | Description                                                      |
| ------------------------- | ---------------------------------------------------------------- |
| **Logical Address**       | Address generated by CPU                                         |
| **Physical Address**      | Address in main memory                                           |
| **Virtual Address Space** | Set of all logical addresses a process can use                   |
| **Backing Store**         | Secondary storage (usually a hard disk or SSD) used for swapping |

---

## 📥 Demand Paging

### 🔧 Concept:

- Pages are **loaded into memory only when needed** (on-demand).
- If a page is not in memory → **page fault occurs**.

### 🧩 Steps on Page Fault:

1. Trap to OS.
2. OS checks if the reference is valid.
3. If valid, page is fetched from disk into memory.
4. Page table is updated.
5. Instruction is restarted.

---

### 🧠 Advantages of Demand Paging

- Saves memory
- Faster startup
- Enables virtual memory

---

## 🚨 Page Replacement

Occurs when a page needs to be loaded, but memory is full. OS replaces a page.

### 🔄 Replacement Algorithms:

| Algorithm   | Strategy                                                          |
| ----------- | ----------------------------------------------------------------- |
| **FIFO**    | Replace oldest page                                               |
| **LRU**     | Replace least recently used page                                  |
| **Optimal** | Replace page that will not be used for longest time (theoretical) |

---

## 📊 Thrashing

### ❗ What is Thrashing?

**Thrashing** occurs when the system spends **more time swapping pages** in and out of memory than executing processes.

---

### 🔍 Causes:

- High degree of **multiprogramming**
- **Insufficient memory**
- Bad **page replacement algorithm**

---

### 🛡️ Prevention Techniques

1. **Reduce degree of multiprogramming**
2. Use **working set model** – only allow processes to run if their required pages are in memory.
3. Use **Page Fault Frequency (PFF)** to monitor and adjust.

---

## 📐 Working Set Model

- Defines the set of pages a process is actively using.
- If working set fits in memory → minimal page faults.
- If not → thrashing likely.

---

## 📌 Key Terms Summary

| Term             | Definition                           |
| ---------------- | ------------------------------------ |
| Virtual Memory   | Uses disk to extend RAM              |
| Demand Paging    | Loads pages only when required       |
| Page Fault       | Page not found in memory             |
| Page Replacement | Swapping out a page to make room     |
| Thrashing        | Excessive paging → performance drops |

---

## ✅ Key Takeaways

- Virtual memory allows large, efficient, and isolated process execution.
- Demand paging loads only needed pages, saving resources.
- Thrashing is a dangerous performance issue and must be avoided using working set or PFF.
